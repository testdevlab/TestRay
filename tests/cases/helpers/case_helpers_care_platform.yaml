CarePlatformLogout:
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:     
      # Log out to the Care Platform app with Care Partners account
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_header.user_dropdown_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_header.logout_menu_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_logout_modal.log_out_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_login.login_button$

CarePartnerLogin:
  Roles:
    - Role: desktopChrome
      App: desktop
  Actions:
    - Type: navigate
      Role: desktopChrome
      Value: $AND_CLI_care_platform_url$
    - Type: maximize
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_login.email_input$
      Value: $AND_CLI_carepartner_user1$
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_login.password_input$
      Value: $AND_CLI_carepartner_user1_pwd$
    - Type: click
      Strategy: xpath
      Role: desktopChrome
      Id: $PAGE.care_platform_login.login_button$
    - Type: sleep
      Time: 2
#    - Type: if
#      If_Cases:
#      - If_Case: VerifyEmail

CarePartnerLoginSecondaryUser:
  Roles:
    - Role: desktopChrome
      App: desktop
  Actions:
    - Type: navigate
      Role: desktopChrome
      Value: $AND_CLI_care_platform_url$
    - Type: maximize
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_login.email_input$
      Value: $AND_CLI_carepartner_user2$
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_login.password_input$
      Value: $AND_CLI_carepartner_user2_pwd$
    - Type: click
      Strategy: xpath
      Role: desktopChrome
      Id: $PAGE.care_platform_login.login_button$
    - Type: sleep
      Time: 2

VerifyEmail:
  Roles:
    - Role: desktopChrome
      App: desktop
  Actions:
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_verify_account.email_button$

SetScheduledCallForSeniors:
  Environment: Settings 
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:
    # Login to the Care Platform app with Care Partners account
    - Type: case
      Value: CarePartnerLogin   
    # Navigate to Participants
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_participant$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_participant$
    # Open the Call Portal
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_complete_name$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.call_portal_btn$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.create_event_btn$    
    # Create the event
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.create_event_btn$    
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_call_portal.category_select$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.teleheath_appointment_option$
    - Type: generate_unique_name
      Name: "Automation Event"
      ResultVar: UNIQUE_EVENT_NAME
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.subject_input$
      Value: $AND_CLI_UNIQUE_EVENT_NAME$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.date_container$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.today_date_date_picker$
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_call_portal.start_time_picker$
      Value: 800a
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_call_portal.end_time_picker$
      Value: 900p
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.next_btn$
    # Filling the Situation fields
    # Urgent patient matter
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_call_portal.urgent_patient_matter_select$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.urgent_patient_matter_yes_option$
    # Reason for request
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_call_portal.reason_for_request_select$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.first_reason_for_request_available_option$
    # When did symptoms start      
    - Type: click
      Strategy: class
      Id: $PAGE.care_platform_call_portal.symptoms_start_input_container$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.today_date_date_picker$
    # Click in the submit button
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.submit_create_event_btn$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_notifications.event_created_notification$
    # Get timestamp where event was sent to Senior.
    - Type: get_local_timestamp
      Format: "%c"
      Var: EVENT_SENT_TIMESTAMP
    # Navigate back to home 
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_home$

SetPastEventForSeniors:
  Environment: Settings
  Vars:
    LOGOUT_OPTION: "Go Off Shift"
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:   
    # Login to the Care Platform app with Care Partners account
    - Type: case
      Value: CarePartnerLogin
      # Navigate to Participants
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_participant$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_participant$
      # Open the Call Portal
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_complete_name$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.call_portal_btn$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.create_event_btn$    
      # Create the event
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.create_event_btn$    
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_call_portal.category_select$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.teleheath_appointment_option$
    #Generate unique name for the event.
    - Type: generate_unique_name
      Name: "Automation Sched Event"
      ResultVar: UNIQUE_EVENT_NAME
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.subject_input$
      Value: $AND_CLI_UNIQUE_EVENT_NAME$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.date_container$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.today_date_date_picker$
    #Set a time in the past for the event to start
    - Type: get_past_timestamp
      Format: "%I%M%p"
      Var: PAST_START_TIME
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_call_portal.start_time_picker$
      Value: $AND_CLI_PAST_START_TIME$
    # Set now time to end the event.
    - Type: get_local_timestamp
      Format: "%I%M%p"
      Var: NOW_END_TIME
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_call_portal.end_time_picker$
      Value: $AND_CLI_NOW_END_TIME$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.next_btn$
      # Filling the Situation fields
      # Urgent patient matter
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_call_portal.urgent_patient_matter_select$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.urgent_patient_matter_yes_option$
      # Reason for request
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_call_portal.reason_for_request_select$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.first_reason_for_request_available_option$
      # When did symptoms start      
    - Type: click
      Strategy: class
      Id: $PAGE.care_platform_call_portal.symptoms_start_input_container$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.today_date_date_picker$
      # Click in the submit button
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.submit_create_event_btn$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_notifications.event_created_notification$
      # Navigate back to home 
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_home$
    - Type: case
      Value: CarePlatformLogout

# Used 7 mins to be safe, Starting modal starts when it's missing 5 minutes and with 7 mins then we play safe with the care partner tear down.
SetScheduledCallForSeniorsToStartIn7Minutes:
  Environment: Settings
  Vars:
    LOGOUT_OPTION: "Go Off Shift"
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:   
    # Login to the Care Platform app with Care Partners account
    - Type: case
      Value: CarePartnerLogin
      # Navigate to Participants
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_participant$
      # Open the Call Portal
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_complete_name$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.call_portal_btn$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.create_event_btn$    
      # Create the event
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.create_event_btn$    
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_call_portal.category_select$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.teleheath_appointment_option$
    #Generate unique name for the event.
    - Type: generate_unique_name
      Name: "Automation Sched Event"
      ResultVar: UNIQUE_EVENT_NAME
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.subject_input$
      Value: $AND_CLI_UNIQUE_EVENT_NAME$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.date_container$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.today_date_date_picker$
    #Set a time in the future for the event to start in 7 minutes.
    - Type: get_timestamp_plus_minutes
      Minutes: 7
      Format: "%I%M%p"
      Var: FUTURE_START_6MINUTES
    - Type: get_timestamp_plus_minutes
      Minutes: 7
      Format: "%-I:%M%P"
      Var: FUTURE_START_6MINUTES_FOR_COMPARISON
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_call_portal.start_time_picker$
      Value: $AND_CLI_FUTURE_START_6MINUTES$
    # Set end time to end event in 30 mins.
    - Type: get_timestamp_plus_minutes
      Minutes: 30
      Format: "%I%M%p"
      Var: FUTURE_START_30MINUTES
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_call_portal.end_time_picker$
      Value: $AND_CLI_FUTURE_START_30MINUTES$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.next_btn$
      # Filling the Situation fields
      # Urgent patient matter
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_call_portal.urgent_patient_matter_select$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.urgent_patient_matter_yes_option$
      # Reason for request
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_call_portal.reason_for_request_select$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.first_reason_for_request_available_option$
      # When did symptoms start      
    - Type: click
      Strategy: class
      Id: $PAGE.care_platform_call_portal.symptoms_start_input_container$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.today_date_date_picker$
      # Click in the submit button
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.submit_create_event_btn$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_notifications.event_created_notification$
      # Navigate back to home 
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_home$
    - Type: case
      Value: CarePlatformLogout

# Used 11 mins so the user is able to do all the needed task with the ones using the 7 mins one(the one above) and then be able to do the validations for this one.
SetScheduledCallForSeniorsToStartIn11Minutes:
  Environment: Settings
  Vars:
    LOGOUT_OPTION: "Go Off Shift"
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:   
    # Login to the Care Platform app with Care Partners account
    - Type: case
      Value: CarePartnerLogin
      # Navigate to Participants
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_participant$
      # Open the Call Portal
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_complete_name$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.call_portal_btn$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.create_event_btn$    
      # Create the event
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.create_event_btn$    
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_call_portal.category_select$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.teleheath_appointment_option$
    #Generate unique name for the event.
    - Type: generate_unique_name
      Name: "Automation Sched Event"
      ResultVar: UNIQUE_EVENT_NAME
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.subject_input$
      Value: $AND_CLI_UNIQUE_EVENT_NAME$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.date_container$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.today_date_date_picker$
    #Set a time in the future for the event to start in 11 minutes.
    - Type: get_timestamp_plus_minutes
      Minutes: 11
      Format: "%I%M%p"
      Var: FUTURE_START_6MINUTES
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_call_portal.start_time_picker$
      Value: $AND_CLI_FUTURE_START_6MINUTES$
    # Set end time to end event in 30 mins.
    - Type: get_timestamp_plus_minutes
      Minutes: 30
      Format: "%I%M%p"
      Var: FUTURE_START_30MINUTES
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_call_portal.end_time_picker$
      Value: $AND_CLI_FUTURE_START_30MINUTES$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.next_btn$
      # Filling the Situation fields
      # Urgent patient matter
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_call_portal.urgent_patient_matter_select$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.urgent_patient_matter_yes_option$
      # Reason for request
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_call_portal.reason_for_request_select$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.first_reason_for_request_available_option$
      # When did symptoms start      
    - Type: click
      Strategy: class
      Id: $PAGE.care_platform_call_portal.symptoms_start_input_container$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.today_date_date_picker$
      # Click in the submit button
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.submit_create_event_btn$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_notifications.event_created_notification$
      # Navigate back to home 
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_home$
    - Type: case
      Value: CarePlatformLogout

SetNonTelehealthAppointmentForSenior:
  Environment: Settings
  Vars:
    LOGOUT_OPTION: "Go Off Shift"
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:
    # Login to the Care Platform app with Care Partners account
    - Type: case
      Value: CarePartnerLogin   
    # Navigate to Participants
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_participant$
    # Open the Call Portal
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_complete_name$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.call_portal_btn$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.create_event_btn$    
    # Create the event
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.create_event_btn$    
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_call_portal.category_select$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.manual_appointment_option$
    - Type: generate_unique_name
      Name: "Automation Manual Appointment"
      ResultVar: UNIQUE_MANUAL_APPOINTMENT
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.subject_input$
      Value: $AND_CLI_UNIQUE_MANUAL_APPOINTMENT$
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.location_input$
      Value: Automation manual appointment
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.date_container$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.today_date_date_picker$
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_call_portal.start_time_picker$
      Value: 800a
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_call_portal.end_time_picker$
      Value: 900p
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.save_and_close_btn$
    # Navigate back to home 
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_home$
    - Type: case
      Value: CarePlatformLogout

AnswerCallAndRescheduleForOneHourLater:
  Environment: Settings
  Vars:
    LOGOUT_OPTION: "Go Off Shift"
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:
# Login to the Care Platform app with Care Partners account.
    - Type: case
      Value: CarePartnerLogin
    # Care partner steps to take the call.
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_home.first_call_of_queue$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_home.answer_call$
    # Edit the event
    - Type: wait_for
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.participant_schedule_based_on_element$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.participant_schedule_based_on_element$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.edit_event_button$
    - Type: wait_for
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.edit_event_modal_header$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.date_container$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.today_date_date_picker$
    # Set a time in the future for the event to start in 60 minutes.
    - Type: get_timestamp_plus_minutes
      Minutes: 60
      Format: "%I%M%p"
      Var: FUTURE_START_60MINUTES
    # Get the schedule time to compare on the future.
    - Type: get_timestamp_plus_minutes
      Minutes: 60
      Format: "%-I:%M%P"
      Var: FUTURE_START_60MINUTES_FOR_COMPARISON
    - Type: send_keys
      Role: desktopChrome
      Strategy: id
      Id: $PAGE.care_platform_call_portal.start_time_picker$
      Value: $AND_CLI_FUTURE_START_60MINUTES$
    # Set end time to end event in 90 mins.
    - Type: get_timestamp_plus_minutes
      Minutes: 90
      Format: "%I%M%p"
      Var: FUTURE_START_90MINUTES
    # Get the schedule time to compare on the future.
    - Type: get_timestamp_plus_minutes
      Minutes: 90
      Format: "%-I:%M%P"
      Var: FUTURE_START_90MINUTES_FOR_COMPARISON
    - Type: send_keys
      Role: desktopChrome
      Strategy: id
      Id: $PAGE.care_platform_call_portal.end_time_picker$
      Value: $AND_CLI_FUTURE_START_90MINUTES$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.save_and_close_btn$
    # Get timestamp where event was rescheduled to Senior.
    - Type: get_local_timestamp
      Format: "%c"
      Var: EVENT_RESCHEDULE_TIMESTAMP
    - Type: wait_for
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_notifications.event_saved_notification$
    # Leave call.
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.leave_call_btn$
    # Fill the notes
    - Type: send_keys
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.providers_call_handling_page.subject_input$
      Value: Automation Post call survey data
    - Type: send_keys
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.providers_call_handling_page.details_textarea$
      Value: Automation Post call survey data   
    - Type: wait_for_property
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.complete_session_btn$ 
      Property: disabled
      Value: "false"
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.complete_session_btn$             
    # Fill the Post-call Survey
    - Type: wait_for
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.non_medical_radiobtn$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.non_medical_radiobtn$             
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.issue_resolved_yes_radiobutton$          
    - Type: click
      Role: desktopChrome
      Strategy: id
      Id: $PAGE.care_platform_call_portal.category_select$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.medical_question_option$
    - Type: click
      Role: desktopChrome
      Strategy: id
      Id: $PAGE.care_platform_call_portal.subcategory_select$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.located_provider_option$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.submit_and_exit_session_button$
    - Type: wait_for
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_notifications.call_completed_notification$
    # Navigate back to home 
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_home$
    - Type: case
      Value: CarePlatformLogout

AnswerPastCallAndRescheduleForOneHourLater:
  Environment: Settings
  Vars:
    LOGOUT_OPTION: "Go Off Shift"
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:
    # Login to the Care Platform app with Care Partners account.
    - Type: case
      Value: CarePartnerLogin
    # Care partner steps to take the call.
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_home.first_call_of_queue$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_home.answer_call$
    # Create the new event
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.create_event_btn$    
    # Create the event
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.create_event_btn$    
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_call_portal.category_select$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.teleheath_appointment_option$
    - Type: generate_unique_name
      Name: "Autom. Resched"
      ResultVar: UNIQUE_EVENT_NAME
    - Type: send_keys
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.subject_input$
      Value: $AND_CLI_UNIQUE_EVENT_NAME$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.date_container$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.today_date_date_picker$
    # Set a time in the future for the event to start in 60 minutes.
    - Type: get_timestamp_plus_minutes
      Minutes: 60
      Format: "%I%M%p"
      Var: FUTURE_START_60MINUTES
    # Get the schedule time to compare on the future.
    - Type: get_timestamp_plus_minutes
      Minutes: 60
      Format: "%-I:%M%P"
      Var: FUTURE_START_60MINUTES_FOR_COMPARISON
    - Type: send_keys
      Role: desktopChrome
      Strategy: id
      Id: $PAGE.care_platform_call_portal.start_time_picker$
      Value: $AND_CLI_FUTURE_START_60MINUTES$
    # Set end time to end event in 90 mins.
    - Type: get_timestamp_plus_minutes
      Minutes: 90
      Format: "%I%M%p"
      Var: FUTURE_START_90MINUTES
    # Get the schedule time to compare on the future.
    - Type: get_timestamp_plus_minutes
      Minutes: 90
      Format: "%-I:%M%P"
      Var: FUTURE_START_90MINUTES_FOR_COMPARISON
    - Type: send_keys
      Role: desktopChrome
      Strategy: id
      Id: $PAGE.care_platform_call_portal.end_time_picker$
      Value: $AND_CLI_FUTURE_START_90MINUTES$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.next_btn$
    # Filling the Situation fields
    # Urgent patient matter
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_call_portal.urgent_patient_matter_select$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.urgent_patient_matter_yes_option$
    # Reason for request
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_call_portal.reason_for_request_select$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.first_reason_for_request_available_option$
    # When did symptoms start      
    - Type: click
      Strategy: class
      Id: $PAGE.care_platform_call_portal.symptoms_start_input_container$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.today_date_date_picker$
    # Click in the submit button
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.submit_create_event_btn$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_notifications.event_created_notification$
    # Get timestamp where event was rescheduled to Senior.
    - Type: get_local_timestamp
      Format: "%c"
      Var: EVENT_RESCHEDULE_TIMESTAMP
    # Leave call.
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.leave_call_btn$
    # Fill the notes
    - Type: send_keys
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.providers_call_handling_page.subject_input$
      Value: Automation Post call survey data
    - Type: send_keys
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.providers_call_handling_page.details_textarea$
      Value: Automation Post call survey data   
    - Type: wait_for_property
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.complete_session_btn$ 
      Property: disabled
      Value: "false"
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.complete_session_btn$             
    # Fill the Post-call Survey
    - Type: wait_for
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.non_medical_radiobtn$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.non_medical_radiobtn$             
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.issue_resolved_yes_radiobutton$          
    - Type: click
      Role: desktopChrome
      Strategy: id
      Id: $PAGE.care_platform_call_portal.category_select$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.medical_question_option$
    - Type: click
      Role: desktopChrome
      Strategy: id
      Id: $PAGE.care_platform_call_portal.subcategory_select$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.located_provider_option$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.submit_and_exit_session_button$
    - Type: wait_for
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_notifications.call_completed_notification$
    # Navigate back to home 
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_home$
    - Type: case
      Value: CarePlatformLogout

DeleteFutureEventForSenior:
  Environment: Settings
  Vars:
    LOGOUT_OPTION: "Go Off Shift"
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:
    # Login to the Care Platform app with Care Partners account.
    - Type: case
      Value: CarePartnerLogin
    # Navigate to Participants
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_participant$
    # Open the Call Portal
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_complete_name$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.call_portal_btn$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.create_event_btn$   
    # Delete the event
    - Type: wait_for
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.participant_schedule_based_on_element$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.participant_schedule_based_on_element$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.delete_event_button$
    - Type: wait_for
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.yes_delete_button$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.yes_delete_button$
    - Type: wait_for
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_notifications.event_deleted_notification$
    # Navigate back to home 
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_home$
    - Type: case
      Value: CarePlatformLogout

#Update Password on the CarePlatform
CarePlatformUpdatePassword:
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:
    #Going to My Account
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_header.user_dropdown_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_header.user_dropdown_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_header.myaccount_menu_button$
  #Click in Update Password
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.update_password_button$
  #Verify the elements
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.confirm_new_password_input$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.confirm_new_password_label$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.new_password_input$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.new_password_label$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.current_password_input$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.current_password_label$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_login.dialog_cancel_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.change_my_password_button$
  #Fill the fields with invalid values
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.current_password_input$
      Value: $AND_CLI_carepartner_user1_pwd$
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.new_password_input$
      Value: $AND_CLI_alternative_incorrect_password$
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.confirm_new_password_input$
      Value: $AND_CLI_alternative_incorrect_password$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.change_my_password_button$
  #Verify a red alert text showed up
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.password_requirements_alert_text$
  #Click in Cancel
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_login.dialog_cancel_button$
  #Verify the dialog is closed
    - Type: wait_not_visible
      Strategy: xpath
      Id: $PAGE.care_platform_login.dialog_cancel_button$
      Time: 10
  #Going to My Account
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_header.user_dropdown_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_header.myaccount_menu_button$
  #Click in Update Password
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.update_password_button$
  #Fill the fields
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.current_password_input$
      Value: $AND_CLI_carepartner_user1_pwd$
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.new_password_input$
      Value: $AND_CLI_alternative_correct_password$
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.confirm_new_password_input$
      Value: $AND_CLI_alternative_correct_password$
  #Click the Change My Password button
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.change_my_password_button$
  #Verify the alert for "Password updated successfully" is displayed
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.password_updated_successfully_alert_msg$
  #Calling Logout case
    - Type: case
      Value: CarePlatformLogout
  #Setting the password var to the new value
    - Type: set_env_var
      Value: $AND_CLI_alternative_correct_password$
      Var: carepartner_user1_pwd
  #Calling Login case
    - Type: case
      Value: CarePartnerLogin
  #Verify the login with the new password was successful
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_header.user_dropdown_button$
  #Restore the password
  #Going to My Account
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_header.user_dropdown_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_header.myaccount_menu_button$
  #Click in Update Password
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.update_password_button$
  #Set the password var to the new value
    - Type: set_env_var
      Value: $AND_CLI_ENV_PASS_STORE$
      Var: carepartner_user1_pwd
  #Fill the fields
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.current_password_input$
      Value: $AND_CLI_alternative_correct_password$
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.new_password_input$
      Value: $AND_CLI_carepartner_user1_pwd$
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.confirm_new_password_input$
      Value: $AND_CLI_carepartner_user1_pwd$
  #Click the Change My Password button
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.change_my_password_button$

CarePlatformUpdateInfo:
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:
#Going to My Account
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform_header.user_dropdown_button$
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform_header.myaccount_menu_button$  
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.modal_title$
  #Saving original firstname, and adding a 1 to form input
    - Type: get_attribute
      Strategy: xpath
      Id : $PAGE.care_platform_myaccount_info.firstname_input$
      Greps:
        - var: FIRSTNAME_ORIG
          attr: value
          condition: nempty
          match: "(.*)"
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.firstname_input$
      Value: '1'
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform_myaccount_info.modal_title$
    - Type: get_attribute
      Strategy: xpath
      Id : $PAGE.care_platform_myaccount_info.firstname_input$
      Greps:
        - var: FIRSTNAME_NEW
          attr: value
          condition: nempty
          match: "(.*)" 
  #Checking original and new name are not the same
    - Type: assert
      Asserts:
        - Type: ne
          Var: FIRSTNAME_ORIG
          Value: $AND_CLI_FIRSTNAME_NEW$
  #Verify that the email input can't be modify
    - Type: wait_for_attribute
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.email_input$
      Attribute: disabled
      Value: true
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform_myaccount_info.save_changes_button$  
  #Wait for the success alert message
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.success_alert_msg$
    - Type: wait_not_visible
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.success_alert_msg$
      Time: 10
  # Open the user dropdown on header and verify that the name in the dropdown reflects the new change to the firstname
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform_header.user_dropdown_button$
    - Type: get_text
      Strategy: xpath
      Id : $PAGE.care_platform_header.user_dropdown_user_name$ # Update TC
      Greps:
        - var: NEW_NAME
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: contain
          Var: NEW_NAME
          Value: $AND_CLI_FIRSTNAME_NEW$
  #Going again to the My Account Modal
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform_header.myaccount_menu_button$  
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.modal_title$
  #Changing back the first name as it was originally
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.firstname_input$
      Value: "backspace"
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform_myaccount_info.save_changes_button$
    - Type: wait_not_visible
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.success_alert_msg$
      Time: 10
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform_header.user_dropdown_button$
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform_header.myaccount_menu_button$
    - Type: get_attribute
      Strategy: xpath
      Id : $PAGE.care_platform_myaccount_info.firstname_input$
      Greps:
        - var: BACK_NAME
          attr: value
          condition: nempty
          match: "(.*)"
    - Type: assert
      Asserts:
        - Type: eq
          Var: BACK_NAME
          Value: $AND_CLI_FIRSTNAME_ORIG$
  #Check error on phone number
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.phone_input$
      Value: "backspace"
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform_myaccount_info.save_changes_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.phone_error_message$
  #Use button cancel of the modal
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform_myaccount_info.cancel_button$
    - Type: wait_not_visible
      Strategy: xpath
      Id: $PAGE.care_platform_myaccount_info.modal_title$
      Time: 2

AnswerCallAsCarePartner:
  Environment: Settings
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:
    # Login to the Care Platform app with Care Partners account.
    - Type: case
      Value: CarePartnerLogin
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_home.call_based_on_participant_name$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_home.call_based_on_participant_name$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_home.answer_call$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_home.answer_call$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.end_call_button$

PostCallSurveyCarePartner:
  Environment: Settings
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:
    # End the call on care partner side - Teardown.
    # Fill the notes
    - Type: send_keys
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.providers_call_handling_page.subject_input$
      Value: Missed Call Subject Automation
    - Type: send_keys
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.providers_call_handling_page.details_textarea$
      Value: Automation Tear Down post call survey    
    - Type: wait_for_property
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.complete_session_btn$ 
      Property: disabled
      Value: "false"
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.complete_session_btn$             
    # Fill the Post-call Survey
    - Type: wait_for
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.non_medical_radiobtn$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.non_medical_radiobtn$             
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.issue_resolved_yes_radiobutton$          
    - Type: click
      Role: desktopChrome
      Strategy: id
      Id: $PAGE.care_platform_call_portal.category_select$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.medical_question_option$
    - Type: click
      Role: desktopChrome
      Strategy: id
      Id: $PAGE.care_platform_call_portal.subcategory_select$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.located_provider_option$
    - Type: click
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.submit_and_exit_session_button$
    - Type: wait_for
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform_notifications.call_completed_notification$
    - Type: wait_for
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform.call_queue_title$

# Custom helper to send backspace keys to the subject input on the call portal.
CarePartnerClearSubjectInputField:
  Environment: Settings
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.subject_input$
      Value: backspace

CarePartnerNavigateToParticipants:
  Environment: Settings
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:
    # Navigate to Participants.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_participant$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant.participants_title$ 
    - Type: wait_for_property
      Strategy: xpath
      Id: $PAGE.care_platform_participant.participants_title$ 
      Property: textContent
      Value: "Participants"

CarePartnerNavigateToHome:
  Environment: Settings
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:
    # Navigate to Home.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_home$
    - Type: wait_for
      Role: desktopChrome
      Strategy: xpath
      Id: $PAGE.care_platform.call_queue_title$

CarePartnerSendMessageToSenior:
  Environment: Settings
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:
    # Log in.
    - Type: case
      Value: CarePartnerLogin
    # Navigate to Participants.
    - Type: case
      Value: CarePartnerNavigateToParticipants
    # Decrease listing by searching participant's name
    - Type: search_by_text
      Text: $AND_CLI_senior_user1_name$
    # Click on the desired participant.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_complete_name$
    # Click on "Records".
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.records_button$
    # Page refreshes to show the Participant record:
    # Name and DOB at top of left panel.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.participant_name$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.participant_dob$
    # Verify that there is a message field.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.message_input$
    # Send a Message to the Participant (Senior).
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.message_input$
      Value: $AND_CLI_MESSAGE_TO_PARTICIPANT$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.message_submit_button$
    # Log out.
    - Type: case
      Value: CarePlatformLogout

CarePartnerCallSenior:
  Environment: Settings
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:
    # Log in.
    - Type: case
      Value: CarePartnerLogin
    # Navigate to Participants.
    - Type: case
      Value: CarePartnerNavigateToParticipants
    # Decrease listing by searching participant's name
    - Type: search_by_text
      Text: $AND_CLI_senior_user1_name$
    # Click on the desired participant.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_complete_name$
    # Click on the Call Portal button.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant.call_portal_btn$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.call_portal_btn$
    # Click "Call Participant" button.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.call_participant_btn$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.call_participant_btn$
    # Verify that the call has started.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_call_portal.call_camera_button$

ForgotPasswordCarePlatformLoginLink:
  Roles:
    - Role: desktopChrome
      App: desktop       
  Actions:
  #Navigating to the Care Platform login page
    - Type: maximize
    - Type: navigate
      Role: desktopChrome
      Value: $AND_CLI_care_platform_url$
  #Opening the forgot password dialog
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform_login.forgot_password_button$
  #Closing the dialog
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform_login.dialog_cancel_button$
    - Type: wait_not_visible
      Strategy: xpath
      Id: $PAGE.care_platform_login.dialog_submit_button$
  #Opening the forgot password dialog
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform_login.forgot_password_button$
  #Submitting the email
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_login.dialog_email_input$
      Value: $AND_CLI_carepartner_user1$
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform_login.dialog_submit_button$
  #Verify the Thank You text showed up
    - Type: get_text  
      Strategy: xpath
      Id: $PAGE.care_platform_login.dialog_thank_you_title$
      Greps:
      - var: THANK_YOU_TEXT
        match: "(.*)"
    - Type: assert
      Asserts: 
      - Type: eq 
        Var: THANK_YOU_TEXT
        Value: "Thank You"
        raise: true
  #Closing the Thank You dialog   
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform_login.dialog_close_icon_button$
    - Type: wait_not_visible
      Strategy: xpath
      Id : $PAGE.care_platform_login.dialog_submit_button$
  #Step 6 and 7 needs access to the email account provided in previous step
  #Access to the confirmation email message, and link within to set new password
  #These steps cannot be done 

# Cleans the call queue of the Care Partners and Clears the hanged calls.
CarePartnerCleanCallQueueAndHangedCalls:
  Vars:
    LOGOUT_OPTION: "Go Off Shift"
  Environment: Settings
  Roles:
    - Role: desktopChrome
      App: desktop
  Actions:
    # Log in.
    - Type: case
      Value: CarePartnerLogin
    # Clean Care Partner Call Queue and Hanged Calls.
    - Type: care_partner_clean_call_queue_and_hanged_calls
    # Log out.
    - Type: case
      Value: CarePlatformLogout

# Creates a Follow-up Ticket.
CarePartnerCreateFollowUpTicket:
  Environment: Settings
  Roles:
    - Role: desktopChrome
      App: desktop
  Actions:
    # Go to participants
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform.navigation_participant$
    # Select the participant used on the config file.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_complete_name$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_complete_name$
    # Go to follow-up tickets tab.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.follow_up_tab_button$
    # Click on Create Ticket.
    - Type: scroll_to
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.create_ticket_division$
      Options: false
    - Type: click_js
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.create_ticket_button$
    # Fill Create Ticket's form.
    - Type: send_keys
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.ticket_subject_input$
      Value: $AND_CLI_FOLLOW_UP_TICKET$
    - Type: scroll_to
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.ticket_kind_label$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.ticket_kind_input$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.kind_medical_appointment_option$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.ticket_assigned_input$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.assigned_option_based_on_name$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.ticket_date_input$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.current_date_option$
  # Save form.
    - Type: scroll_to
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.save_ticket_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.save_ticket_button$
  # Wait for notification.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.new_ticket_notification$
  # Navigate to Home.  
    - Type: case
      Value: CarePartnerNavigateToHome

# Care Partner sets the EMS Enabled to option the user sends, either true(yes) or false(no).
CarePartnerSetsEMSEnabledToXOption:
  Environment: Settings
  Roles:
    - Role: desktopChrome
      App: desktop
  Actions:
    # Navigate to Participants.
    - Type: case
      Value: CarePartnerNavigateToParticipants
    # Decrease listing by searching participant's name
    - Type: search_by_text
      Text: $AND_CLI_senior_user1_name$
    # Click on the desired participant.
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_complete_name$
    # Click on "Records".
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.records_button$
    # Click on the "Edit Info" button.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.edit_info_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.edit_info_button$
    # Select the "Address/Emergency Phone" option on the navigation bar at the left.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participant_records.address_emergency_phone_navigation$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participant_records.address_emergency_phone_navigation$
    # Verify the user is redirected to the Address & Emergency Phone page.
    - Type: wait_for_property
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participant_records.edit_participant_form_label$
      Property: textContent
      Value: "Address & Emergency Phone"
    # Set "EMS Enabled" to "Yes/No/Default" depending on the user input on participant profile and save changes.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participant_address_emergency_phone.enable_ems_calls_option_based_on_user_input$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participant_address_emergency_phone.enable_ems_calls_option_based_on_user_input$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participant_records.save_changes_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_notifications.ems_data_updated_notification$
      Time: 30
    - Type: wait_not_visible
      Strategy: xpath
      Id: $PAGE.care_platform_notifications.ems_data_updated_notification$
      Time: 30
    # Navigate back to home 
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform.navigation_home$

CarePartnerEditParticipantNavigation:
  Environment: Settings
  Roles:
    - Role: desktopChrome
      App: desktop
  Actions:
# Navigate to Participants
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform.navigation_participant$
  # Limit listing by searching name
    - Type: search_by_text
      Text: $AND_CLI_senior_user1_name$
  # Select first participant by name in the list
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_complete_name$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_complete_name$
  # Go to Records
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.records_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.participant_name$
  # Click on the "Edit Info" button.
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.edit_info_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.edit_info_button$
    - Type: sleep
      Time: 1

CarePartnerToastValidation:
  Environment: Settings
  Roles:
    - Role: desktopChrome
      App: desktop
  Actions:
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform.carepartner_toast_notification$
    - Type: get_text
      Strategy: xpath
      Id : $PAGE.care_platform.carepartner_toast_notification$
      Greps:
        - var: TOAST_MESSAGE
          match: "(.*)"
    - Type: assert
      Role: desktopChrome
      Asserts:
        - Type: eq
          Var: TOAST_MESSAGE
          Value: $AND_CLI_TOAST_MESSAGE_SHOWN$
    - Type: wait_not_visible
      Strategy: xpath
      Id: $PAGE.care_platform.carepartner_toast_notification$

CarePartnerParticipantRecordsNavigation:
  Environment: Settings
  Roles:
    - Role: desktopChrome
      App: desktop
  Actions:
  # Navigate to Participants
    - Type: click
      Strategy: xpath
      Id : $PAGE.care_platform.navigation_participant$
  # Decrease listing by searching participant's name
    - Type: search_by_text
      Text: $AND_CLI_senior_user1_name$
  # Select first participant by name in the list
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_complete_name$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant.senior_complete_name$
  # Go to Records
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_participant_details.records_button$
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_participant_records.participant_name$

AddEditOrDeleteParticipantVendorInfo:
  Environment: Settings
  Vars:
    ADDRESS: 1000 Street Name, Somewhere, GA 30024
    WEBSITE: www.airportridesrus.com
    CATEGORY: careCoordination
    PHONE: 4365565897
    MODAL_NAME: Add Vendor
  Roles:
    - Role: desktopChrome
      App: desktop
  Actions:
  # Variables to use for Add Vendor
    - Type: generate_unique_name
      Name: 'Airport Rides "R" Us'
      ResultVar: NAME
  # Steps to add a vendor
  # Clicking on "Add Vendor" button
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.add_vendor_button$
  # Waiting for modal
    - Type: wait_for
      Strategy: id
      Id: $PAGE.care_platform_edit_participants_vendor.vendor_modal$
  # Validate if "Add vendor" is opened
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.modal_title_label$
      Greps:
        - var: MODAL_TITLE
          match: "(.*)"
    - Type: assert
      Role: desktopChrome
      Asserts:
        - Type: eq
          Var: MODAL_TITLE
          Value: $AND_CLI_MODAL_NAME$
  # Filling Vendor form 
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_edit_participants_vendor.select_category_modal_input$
  # Selecting a Category
    - Type:  wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.category_modal_input$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.category_modal_input$
  # Filling input form
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_edit_participants_vendor.field_name_modal_input$
      Value: $AND_CLI_NAME$
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_edit_participants_vendor.field_address_modal_input$
      Value: $AND_CLI_ADDRESS$
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_edit_participants_vendor.field_phone_modal_input$
      Value: $AND_CLI_PHONE$
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_edit_participants_vendor.field_website_modal_input$
      Value: $AND_CLI_WEBSITE$
  # Closing "Add Vendor" modal
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.cancel_vendor_modal_button$
  # Wait to close modal
    - Type: wait_not_visible
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.modal$
  # Validate if a Vendor have not been added
    - Type: set_env_var
      Value: $AND_CLI_NAME$
      Var: NEW_NAME
    - Type: wait_not_visible
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.name_vendor_record$
  # Open Add "Vendor" modal
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.add_vendor_button$
  # Filling Vendor form 
    - Type: click
      Strategy: id
      Id: $PAGE.care_platform_edit_participants_vendor.select_category_modal_input$
  # Selecting a Category
    - Type:  wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.category_modal_input$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.category_modal_input$
  # Filling input form
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_edit_participants_vendor.field_name_modal_input$
      Value: $AND_CLI_NAME$
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_edit_participants_vendor.field_address_modal_input$
      Value: $AND_CLI_ADDRESS$
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_edit_participants_vendor.field_phone_modal_input$
      Value: $AND_CLI_PHONE$
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_edit_participants_vendor.field_website_modal_input$
      Value: $AND_CLI_WEBSITE$
  # Click on "save and close" button
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.save_close_modal_button$
  # Validate toast message and wait until toast is not visible
    - Type: set_env_var
      Value: Vendor created
      Var: TOAST_MESSAGE_SHOWN
    - Type: case
      Value: CarePartnerToastValidation
  # Steps to edit a vendor
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.edit_created_vendor_button$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.edit_created_vendor_button$
    - Type: set_env_var
      Value: Edit Vendor
      Var: MODAL_NAME
    - Type: get_text
      Strategy: xpath
      Id : $PAGE.care_platform_edit_participants_vendor.modal_title_label$
      Greps:
        - var: MODAL_TITLE
          match: "(.*)"
    - Type: assert
      Role: desktopChrome
      Asserts:
        - Type: eq
          Var: MODAL_TITLE
          Value: $AND_CLI_MODAL_NAME$
  # Remove current vendor name
    - Type: clear_field_by_backspace
      Strategy: id 
      Id: $PAGE.care_platform_edit_participants_vendor.field_name_modal_input$
  # Create a new vendor name
    - Type: generate_unique_name
      Name: 'New airport "L" Us'
      ResultVar: NEW_NAME
  # Fill input name vendor
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_edit_participants_vendor.field_name_modal_input$
      Value: $AND_CLI_NEW_NAME$
  # Closing "Edit Vendor" modal
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.cancel_vendor_modal_button$
  # Validate if Vendor is edited
    - Type: set_env_var
      Value: $AND_CLI_NAME$
      Var: NEW_NAME
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.name_vendor_record$
      Greps:
        - var: CATEGORY_VENDOR_NAME
          match: "(.*)"
    - Type: assert
      Role: desktopChrome
      Asserts:
        - Type: eq
          Var: CATEGORY_VENDOR_NAME
          Value: $AND_CLI_NAME$
  # Opend "Edit Vendor" modal
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.edit_created_vendor_button$
  # Delete current vendor name
    - Type: clear_field_by_backspace
      Strategy: id 
      Id: $PAGE.care_platform_edit_participants_vendor.field_name_modal_input$
  # Create a new vendor name
    - Type: generate_unique_name
      Name: 'New airport "L" Us'
      ResultVar: NEW_NAME
  # Fill input name vendor
    - Type: send_keys
      Strategy: id
      Id: $PAGE.care_platform_edit_participants_vendor.field_name_modal_input$
      Value: $AND_CLI_NEW_NAME$
  # Click "Save and close" button
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.save_close_modal_button$
  # Validate toast message
    - Type: set_env_var
      Value: Vendor saved
      Var: TOAST_MESSAGE_SHOWN
    - Type: case
      Value: CarePartnerToastValidation
  # Validate if the new change is applied
    - Type: get_text
      Strategy: xpath
      Id : $PAGE.care_platform_edit_participants_vendor.name_vendor_record$
      Greps:
        - var: CATEGORY_VENDOR_NAME
          match: "(.*)"
    - Type: assert
      Role: desktopChrome
      Asserts:
        - Type: eq
          Var: CATEGORY_VENDOR_NAME
          Value: $AND_CLI_NEW_NAME$
  # Delete category 
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.delete_created_vendor_button$
    - Type: wait_for
      Strategy: id
      Id: $PAGE.care_platform_edit_participants_vendor.vendor_dialog$
  # Validate if "Delete Vendor" is opened
    - Type: set_env_var
      Value: Delete Vendor
      Var: MODAL_NAME
    - Type: get_text
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.dialog_title_label$
      Greps:
        - var: MODAL_TITLE
          match: "(.*)"
    - Type: assert
      Role: desktopChrome
      Asserts:
        - Type: eq
          Var: MODAL_TITLE
          Value: $AND_CLI_MODAL_NAME$
  # Closing "Delete Vendor" dialog
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.cancel_vendor_dialogs_button$
  # Checking if vendor is not deleted
    - Type: wait_for
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.name_vendor_record$
  # Open "Delete Vendor" dialog
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.delete_created_vendor_button$
    - Type: wait_for
      Strategy: id
      Id: $PAGE.care_platform_edit_participants_vendor.vendor_dialog$
  # Confirm delete vendor
    - Type: wait_for
      Strategy: id
      Id: $PAGE.care_platform_edit_participants_vendor.vendor_dialog$
    - Type: click
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.delete_confirmation_modal$
  # Wait to close dialog
    - Type: wait_not_visible
      Strategy: xpath
      Id: $PAGE.care_platform_edit_participants_vendor.vendor_dialog$
  # Validate toast message
    - Type: set_env_var
      Value: Vendor deleted
      Var: TOAST_MESSAGE_SHOWN
  # Add Edit Or Delete vendor Info
    - Type: case
      Value: CarePartnerToastValidation