TestBrowserFirefoxAV:
  Roles:
    - Role: desktopFirefox
      Capabilities:
        firefoxOptions:
          prefs:
            media.navigator.streams.fake: true
            media.navigator.permission.disabled: true
            media.autoplay.default: 0
            media.autoplay.ask-permission: false
            media.autoplay.enabled.user-gestures-needed: false
      App: desktop
  Actions:
    - Type: navigate
      Role: desktopFirefox
      Value: https://webcamtests.com/
    - Type: click
      Strategy: id
      Role: desktopFirefox
      Id: webcam-launcher
    - Type: sleep
      Time: 10

TestBrowserChromeAV:
  Roles:
    - Role: desktopChrome
      Capabilities:
        chromeOptions:
          args:
            - use-fake-ui-for-media-stream
            - use-fake-device-for-media-stream
            - no-sandbox
            - disable-gpu
      App: "desktop"
  Actions:
    - Type: navigate
      Role: desktopChrome
      Value: https://webcamtests.com/
    - Type: get_text
      Strategy: xpath
      Id : $PAGE.webcamtest_page.check_webcam_link$
      Greps:
          - var: check_webcam_text
            match: "Check Webcam"
    - Type: assert
      Role: desktopChrome
      Asserts: 
        - Type: eq
          Var: check_webcam_text
          Value: "Check Webcam"      
    - Type: click
      Strategy: id
      Role: desktopChrome
      Id: $PAGE.webcamtest_page.testmycam_button$
    - Type: sleep
      Time: 10

TestBrowserSafariAV:
  Roles:
    - Role: desktopSafari
      Capabilities:
        safariOptions:
          prefs:
            media.navigator.streams.fake: true
            media.navigator.permission.disabled: true
      App: desktop
  Actions:
    - Type: navigate
      Role: desktopSafari
      Value: https://webcamtests.com/
    - Type: click
      Strategy: id
      Role: desktopSafari
      Id: webcam-launcher
    - Type: sleep
      Time: 10
